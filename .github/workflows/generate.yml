name: generate

on:
  schedule:
  - cron: "0 0 * * *"
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - name: Clone
        uses: actions/checkout@v2
      - name: Checkout heroku buildpacks
        uses: actions/checkout@v2
        with:
          repository: heroku/pack-images
          path: .source/heroku
      - name: Checkout paketo buildpakcs
        uses: actions/checkout@v2
        with:
          repository: paketo-buildpacks/full-builder
          path: .source/paketo
      - name: copy
        run: |
          find .source

          cp .source/heroku/builder-18.toml builders/heroku/18/builder.toml
          cp .source/heroku/builder-20.toml builders/heroku/20/builder.toml
          cp .source/paketo/builder.toml builders/paketo/18/builder.toml
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          body: |
            Auto-generated by [create-pull-request]
